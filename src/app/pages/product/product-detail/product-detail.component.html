<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/tab1"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalle del Producto</ion-title>
  </ion-toolbar>
</ion-header>

<!-- Estado de carga -->
<ion-content *ngIf="isLoading" class="ion-padding">
  <div class="loading-container">
    <ion-spinner></ion-spinner>
    <p>Cargando producto...</p>
  </div>
</ion-content>

<!-- Estado de error -->
<ion-content *ngIf="!isLoading && error" class="ion-padding">
  <div class="error-container">
    <ion-icon name="alert-circle" class="error-icon"></ion-icon>
    <h2>Error</h2>
    <p>{{ error }}</p>
    <ion-button (click)="router.navigate(['/tabs/tab1'])" fill="outline" class="ion-margin-top">
      Volver al catálogo
    </ion-button>
  </div>
</ion-content>

<!-- Contenido del producto -->
<ion-content class="ion-padding" *ngIf="!isLoading && product && !error">
  <div class="product-detail-container">
    
    <!-- Imagen del producto con badge -->
    <div class="product-image-container">
      <img draggable="false" [src]="product.image" [alt]="product.name" class="product-image" />
      <div class="hot-sale-badge" *ngIf="product.hotSale">
        Disponible
      </div>
    </div>

    <!-- Información del producto -->
    <div class="product-info">
      <!-- Categoría -->
      <div class="product-category">{{ product.category }}</div>
      
      <!-- Nombre del producto -->
      <h1 class="product-name">{{ product.name }}</h1>
      
      <!-- Rating y Reviews -->
      <div class="product-rating-section">
        <div class="stars">
          <ion-icon 
            *ngFor="let star of getStars(product.rating); let i = index" 
            [name]="star === 'full' ? 'star' : 'star-outline'"
            [class.star-full]="star === 'full'"
            [class.star-empty]="star === 'empty'"
            class="star-icon"
            [attr.aria-label]="'Star ' + (i + 1)">
          </ion-icon>
        </div>
        <span class="reviews-count">{{ product.reviews }} Reviews</span>
        <span class="stock-status" [class.in-stock]="product.inStock">
          {{ product.inStock ? '• En Stock' : '• Agotado' }}
        </span>
      </div>

      <!-- Precio -->
      <div class="product-pricing">
        <div class="original-price" *ngIf="product.priceBuy">
          ${{ product.priceOffer | number:'1.0-0' }}
        </div>
        <div class="current-price">
          ${{ product.priceSale | number:'1.0-0' }}
        </div>
      </div>

      <!-- Descripción -->
      <div class="product-description-section">
        <h2 class="section-title">Descripción</h2>
        <p class="product-description">{{ product.description }}</p>
      </div>

      <!-- Características -->
      <div class="product-features-section">
        <h2 class="section-title">Características</h2>
        <div class="product-features">
          <span class="feature-tag" *ngFor="let feature of product.features">
            {{ feature }}
          </span>
        </div>
      </div>

    </div>

  </div>
</ion-content>
